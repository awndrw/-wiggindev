name: Get Packages
description: Gets the packages and returns them to use in a matrix

outputs:
    packages:
        description: Array of packages
        value: ${{ steps.get.outputs.packages }}

runs:
    using: composite
    steps:
        - name: Checkout
          uses: actions/checkout@v3

        - name: Get contents
          id: get
          shell: python
          run: |
              import os, json
              packages=os.listdir('packages')
              jsonPackages=json.dumps(packages)
              print(f'::set-output name=packages::{jsonPackages}')
              os.system('echo "## Packages Loaded" >> $GITHUB_STEP_SUMMARY')
              os.system('echo "" >> $GITHUB_STEP_SUMMARY')
              for package in packages:
                  os.system(f'echo "- {package}" >> $GITHUB_STEP_SUMMARY')
